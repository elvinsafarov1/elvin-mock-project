{"ast":null,"code":"import { toAttributes } from '../common/internal';\nexport function sdkSpanToOtlpSpan(span, encoder) {\n  var _a;\n  var ctx = span.spanContext();\n  var status = span.status;\n  return {\n    traceId: encoder.encodeSpanContext(ctx.traceId),\n    spanId: encoder.encodeSpanContext(ctx.spanId),\n    parentSpanId: encoder.encodeOptionalSpanContext(span.parentSpanId),\n    traceState: (_a = ctx.traceState) === null || _a === void 0 ? void 0 : _a.serialize(),\n    name: span.name,\n    // Span kind is offset by 1 because the API does not define a value for unset\n    kind: span.kind == null ? 0 : span.kind + 1,\n    startTimeUnixNano: encoder.encodeHrTime(span.startTime),\n    endTimeUnixNano: encoder.encodeHrTime(span.endTime),\n    attributes: toAttributes(span.attributes),\n    droppedAttributesCount: span.droppedAttributesCount,\n    events: span.events.map(function (event) {\n      return toOtlpSpanEvent(event, encoder);\n    }),\n    droppedEventsCount: span.droppedEventsCount,\n    status: {\n      // API and proto enums share the same values\n      code: status.code,\n      message: status.message\n    },\n    links: span.links.map(function (link) {\n      return toOtlpLink(link, encoder);\n    }),\n    droppedLinksCount: span.droppedLinksCount\n  };\n}\nexport function toOtlpLink(link, encoder) {\n  var _a;\n  return {\n    attributes: link.attributes ? toAttributes(link.attributes) : [],\n    spanId: encoder.encodeSpanContext(link.context.spanId),\n    traceId: encoder.encodeSpanContext(link.context.traceId),\n    traceState: (_a = link.context.traceState) === null || _a === void 0 ? void 0 : _a.serialize(),\n    droppedAttributesCount: link.droppedAttributesCount || 0\n  };\n}\nexport function toOtlpSpanEvent(timedEvent, encoder) {\n  return {\n    attributes: timedEvent.attributes ? toAttributes(timedEvent.attributes) : [],\n    name: timedEvent.name,\n    timeUnixNano: encoder.encodeHrTime(timedEvent.time),\n    droppedAttributesCount: timedEvent.droppedAttributesCount || 0\n  };\n}\n//# sourceMappingURL=internal.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}