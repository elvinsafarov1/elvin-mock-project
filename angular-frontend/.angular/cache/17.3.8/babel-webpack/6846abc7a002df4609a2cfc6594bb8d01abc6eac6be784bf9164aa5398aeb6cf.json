{"ast":null,"code":"import _asyncToGenerator from \"/home/elvin/Desktop/elvin-mock-project/elvin-mock-project/angular-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// src/app/telemetry.ts\nimport { WebTracerProvider } from '@opentelemetry/sdk-trace-web';\nimport { OTLPTraceExporter } from '@opentelemetry/exporter-trace-otlp-http';\nimport { BatchSpanProcessor } from '@opentelemetry/sdk-trace-base';\nimport { DocumentLoadInstrumentation } from '@opentelemetry/instrumentation-document-load';\nimport { FetchInstrumentation } from '@opentelemetry/instrumentation-fetch';\nimport { XMLHttpRequestInstrumentation } from '@opentelemetry/instrumentation-xml-http-request';\nimport { ZoneContextManager } from '@opentelemetry/context-zone';\nimport { Resource } from '@opentelemetry/resources';\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { registerInstrumentations } from '@opentelemetry/instrumentation';\nexport function initOpenTelemetry() {\n  return _initOpenTelemetry.apply(this, arguments);\n}\nfunction _initOpenTelemetry() {\n  _initOpenTelemetry = _asyncToGenerator(function* () {\n    const otlpEndpoint = typeof window !== 'undefined' && window.OTEL_EXPORTER_OTLP_ENDPOINT ? window.OTEL_EXPORTER_OTLP_ENDPOINT : 'http://tempo:4318/v1/traces';\n    const resource = new Resource({\n      [SemanticResourceAttributes.SERVICE_NAME]: 'angular-frontend',\n      [SemanticResourceAttributes.SERVICE_VERSION]: '1.0.0',\n      [SemanticResourceAttributes.DEPLOYMENT_ENVIRONMENT]: 'production'\n    });\n    const exporter = new OTLPTraceExporter({\n      url: otlpEndpoint\n    });\n    const provider = new WebTracerProvider({\n      resource\n    });\n    provider.addSpanProcessor(new BatchSpanProcessor(exporter, {\n      maxQueueSize: 100,\n      maxExportBatchSize: 10,\n      scheduledDelayMillis: 500,\n      exportTimeoutMillis: 30000\n    }));\n    provider.register({\n      contextManager: new ZoneContextManager()\n    });\n    registerInstrumentations({\n      instrumentations: [new DocumentLoadInstrumentation(), new FetchInstrumentation({\n        propagateTraceHeaderCorsUrls: [/http:\\/\\/localhost:8080\\/.*/, /http:\\/\\/localhost:8000\\/.*/, new RegExp(`${window.location.origin}/.*`)],\n        clearTimingResources: true\n      }), new XMLHttpRequestInstrumentation({\n        propagateTraceHeaderCorsUrls: [/http:\\/\\/localhost:8080\\/.*/, /http:\\/\\/localhost:8000\\/.*/, new RegExp(`${window.location.origin}/.*`)]\n      })]\n    });\n    console.log('âœ… OpenTelemetry initialized, exporting to:', otlpEndpoint);\n  });\n  return _initOpenTelemetry.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}